<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta name="keywords" content="hexo, andy" />
    <title>
        aaaaaAndy
    </title>
    <!-- favicon -->
    
    <link rel="icon" href="img/favicon.ico" />
     
<link rel="stylesheet" href="/blog/css/style.css">


    <!-- highlight -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/github-gist.min.css" />
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad()
    </script>
<!--    <script src="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-infinite-scroll@2.0.0/dist/main.js"></script>-->

    <script>
        // infiniteScroll()

        window.addEventListener('DOMContentLoaded', function () {
            const [
                mainTitle,
                mobileMenu,
                mobileMainTitle,
                mobileMenuBtn,
                ipadMenuBtn,
                aside,
                closeBtn,
            ] = getEle(
                '#main-title',
                '.mobile-menu',
                '.mobile-menu h3',
                '.mobile-menu button',
                '.ipad-menu',
                'aside',
                'aside .close',
            )
            const io = new IntersectionObserver(entries => {
                if (entries[0].intersectionRatio <= 0) {
                    mobileMainTitle.classList.remove('invisibile')
                } else {
                    mobileMainTitle.classList.add('invisibile')
                }
            })
            io.observe(mainTitle)

            clickToggleAside(mobileMenuBtn)
            clickToggleAside(ipadMenuBtn)
            clickToggleAside(closeBtn, false)

            const isMenuVisible = window.getComputedStyle(mobileMenu).display !== 'none'
            if (isMenuVisible) document.body.style.background = 'none'

            function getEle(...args) {
                return args.map(arg => document.querySelector(arg))
            }

            function clickToggleAside(btn, show = true) {
                btn.addEventListener('click', function () {
                    if (show) {
                        aside.style.display = 'block'
                    } else {
                        aside.style.display = 'none'
                    }
                })
            }
        })
    </script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
    <div class="container">
        <header class="header">
    <h1 class="title" id="main-title">
        <a href="/blog/" class="logo">
            aaaaaAndy
        </a>
    </h1>

    

    <div class="links">
        <ul id="menu-inner" class="menu-inner">
            
            <li class="menu-inner-item">
                <a href="/blog">
                    Home
                </a>
            </li>
            
            <li class="menu-inner-item">
                <a href="/blog/category">
                    Category
                </a>
            </li>
            
            <li class="menu-inner-item">
                <a href="/blog/tag">
                    Tag
                </a>
            </li>
            
            <li class="menu-inner-item">
                <a href="/blog/about">
                    About
                </a>
            </li>
            
        </ul>
    </div>
</header>

<script type="text/javascript">
    function isCurrentPage(url, key) {
      console.log(123)
    }
</script>

        <main class="main">
            <article class="post post-article">
    <h2 class="post-title">
        规范git提交message
    </h2>
    <ul class="post-date">
        <li>
            2020-12-21
        </li>
        <li>
            
                
                    <a class="post-category" href="/blog/categories/git/">
                        git
                    </a>
                
            
        </li>
        <li>
            aaaaaAndy
        </li>
    </ul>
    <div class="post-content">
        <p>在代码提交执行<code>git commit</code>时，引入<code>Commitizen</code>工具，以<code>git cz</code>替代<code>git commit -m &#39;msg&#39;</code>，同时修改默认的<code>angular</code>代码<code>commit</code>标准。</p>
<h2 id="1-Commitizen引入配置流程："><a href="#1-Commitizen引入配置流程：" class="headerlink" title="1. Commitizen引入配置流程："></a>1. <code>Commitizen</code>引入配置流程：</h2><h3 id="1-1-安装依赖"><a href="#1-1-安装依赖" class="headerlink" title="1.1. 安装依赖"></a>1.1. 安装依赖</h3><p>本地安装<code>commitizen</code>和<code>cz-customizable</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add commitizen cz-customizable -D</span><br></pre></td></tr></table></figure>

<h3 id="1-2-添加config配置"><a href="#1-2-添加config配置" class="headerlink" title="1.2. 添加config配置"></a>1.2. 添加<code>config</code>配置</h3><p>项目<code>package.json</code>中添加配置</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"config": &#123;</span><br><span class="line">	"commitizen": &#123;</span><br><span class="line">		"path": "node_modules/cz-customizable"</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-新增配置文件"><a href="#1-3-新增配置文件" class="headerlink" title="1.3. 新增配置文件"></a>1.3. 新增配置文件</h3><p>项目根目录下新增<code>.cz-config.js</code>文件，并添加配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  types: [</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">'feat'</span>, <span class="attr">name</span>: <span class="string">'特性:     一个新功能'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">'fix'</span>, <span class="attr">name</span>: <span class="string">'修复:     修复一个bug'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">'style'</span>, <span class="attr">name</span>: <span class="string">'样式:     文件格式修改，不影响逻辑'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">'docs'</span>, <span class="attr">name</span>: <span class="string">'文档:     仅仅是文档修改'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">'other'</span>, <span class="attr">name</span>: <span class="string">'其他:     其他修改'</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  allowTicketNumber: <span class="literal">false</span>,</span><br><span class="line">  isTicketNumberRequired: <span class="literal">false</span>,</span><br><span class="line">  ticketNumberPrefix: <span class="string">'TICKET-'</span>,</span><br><span class="line">  ticketNumberRegExp: <span class="string">'\\d&#123;1,5&#125;'</span>,</span><br><span class="line"></span><br><span class="line">  messages: &#123;</span><br><span class="line">    type: <span class="string">"选择本次修改的类型:"</span>,</span><br><span class="line">    subject: <span class="string">'请输入本次提交的简短描述:'</span>,</span><br><span class="line">    body: <span class="string">'请输入本次提交的详细描述:'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  skipQuestions: [</span><br><span class="line">    <span class="string">'scope'</span>,</span><br><span class="line">    <span class="string">'ticketNumber'</span>,</span><br><span class="line">    <span class="string">'breaking'</span>,</span><br><span class="line">    <span class="string">'footer'</span>,</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-开心使用"><a href="#1-4-开心使用" class="headerlink" title="1.4. 开心使用"></a>1.4. 开心使用</h3><p>步骤到这里已经可以使用<code>git cz</code>替代<code>git commit</code>命令进行提交，但是此时不会强制使用<code>git cz</code>，也就是说使用<code>git commit</code>也是可以提交成功的。</p>
<h2 id="2-引入commitlint"><a href="#2-引入commitlint" class="headerlink" title="2. 引入commitlint"></a>2. 引入<code>commitlint</code></h2><p>引入<code>commitlint</code>之后就必须使用<code>git cz</code>提交，其实不然，<code>commitlint</code>只是检查你提交的<code>message</code>信息格式，大部分情况下是会被拒绝的，那你就只能使用<code>git cz</code>进行提交。</p>
<h3 id="2-1-安装依赖"><a href="#2-1-安装依赖" class="headerlink" title="2.1. 安装依赖"></a>2.1. 安装依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @commitlint/cli @commitlint/config-conventional husky -D</span><br></pre></td></tr></table></figure>
<h3 id="2-2-新增husky配置"><a href="#2-2-新增husky配置" class="headerlink" title="2.2. 新增husky配置"></a>2.2. 新增<code>husky</code>配置</h3><p><code>package.json</code>新增配置项</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"husky": &#123;</span><br><span class="line">  "hooks": &#123;</span><br><span class="line">    "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="2-3-新增配置文件"><a href="#2-3-新增配置文件" class="headerlink" title="2.3. 新增配置文件"></a>2.3. 新增配置文件</h3><p>在项目根目录下新增文件<code>commitlint.config.js</code>，并写入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  extends: [<span class="string">'@commitlint/config-conventional'</span>],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">'type-enum'</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">'always'</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="string">'feat'</span>, <span class="comment">// 新特性</span></span><br><span class="line">        <span class="string">'fix'</span>, <span class="comment">// 修补bug</span></span><br><span class="line">        <span class="string">'docs'</span>, <span class="comment">// 文档</span></span><br><span class="line">        <span class="string">'style'</span>, <span class="comment">// 格式需改</span></span><br><span class="line">        <span class="string">'other'</span>, <span class="comment">// 其他修改</span></span><br><span class="line">      ],</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'type-empty'</span>: [<span class="number">2</span>, <span class="string">'never'</span>], <span class="comment">// type不能为空</span></span><br><span class="line">    <span class="string">'type-case'</span>: [<span class="number">0</span>, <span class="string">'always'</span>, <span class="string">'lower-case'</span>], <span class="comment">// type不限制大小写</span></span><br><span class="line">    <span class="string">'subject-empty'</span>: [<span class="number">2</span>, <span class="string">'never'</span>], <span class="comment">// subject（简短得描述）不能为空</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>




<a id="more"></a>

    </div>
</article>

        </main>
    </div>
</body>

</html>
