<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="1. git仓库  git init可以初始化一个本地git仓库，执行完命令后在当前目录会存在一个.git文件夹，git所有的内容、信息都保存在此处，可以用tree命令查看.git目录下的目录结构：  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28   ~&#x2F;workspace&#x2F;github&#x2F;git">
<meta property="og:type" content="article">
<meta property="og:title" content="git基础原理">
<meta property="og:url" content="https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/index.html">
<meta property="og:site_name" content="aaaaaAndy">
<meta property="og:description" content="1. git仓库  git init可以初始化一个本地git仓库，执行完命令后在当前目录会存在一个.git文件夹，git所有的内容、信息都保存在此处，可以用tree命令查看.git目录下的目录结构：  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28   ~&#x2F;workspace&#x2F;github&#x2F;git">
<meta property="og:locale" content="zh">
<meta property="article:published_time" content="2021-05-19T02:45:15.000Z">
<meta property="article:modified_time" content="2021-06-01T06:55:48.463Z">
<meta property="article:author" content="aaaaaAndy">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/blog/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/blog/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>git基础原理</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/blog/css/style.css">

    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" class="active" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" class="active" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu" style="visibility: visible;">
    <span id="nav">
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/category">Category</a></li>
         
          <li><a href="/blog/tag">Tag</a></li>
         
          <li><a href="/blog/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/blog/2021/02/01/charles/charles%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%90%86/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/" target="_blank" rel="noopener"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&text=git基础原理" target="_blank" rel="noopener"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&is_video=false&description=git基础原理" target="_blank" rel="noopener"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=git基础原理&body=Check out this article: https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&name=git基础原理&description=1. git仓库

git init可以初始化一个本地git仓库，执行完命令后在当前目录会存在一个.git文件夹，git所有的内容、信息都保存在此处，可以用tree命令查看.git目录下的目录结构：

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28


~/workspace/github/git-study(master ✗) tree .git
.git
├── HEAD
├── config
├── description
├── hooks
│   ├── applypatch-msg"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-git仓库"><span class="toc-number">1.</span> <span class="toc-text">1. git仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-object类型"><span class="toc-number">2.</span> <span class="toc-text">2. object类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-blob-object"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 blob object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-tree-object"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 tree object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-commit-object"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 commit object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Head-分支"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 Head 分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-新增文件"><span class="toc-number">3.</span> <span class="toc-text">3. 新增文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-git-add过程"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 git add过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-git-commit过程"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 git commit过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-修改文件"><span class="toc-number">4.</span> <span class="toc-text">4. 修改文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-git-add过程"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 git add过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-git-commit过程"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 git commit过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-git-log"><span class="toc-number">5.</span> <span class="toc-text">5. git log</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-branch"><span class="toc-number">6.</span> <span class="toc-text">6. branch</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        git基础原理
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">aaaaaAndy</span>
      </span>
      
    <div class="postdate">
        <time datetime="2021-05-19T02:45:15.000Z" itemprop="datePublished">2021-05-19</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/blog/tags/git/" rel="tag">git</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="1-git仓库"><a href="#1-git仓库" class="headerlink" title="1. git仓库"></a>1. <code>git</code>仓库</h2><p><code>git init</code>可以初始化一个本地<code>git</code>仓库，执行完命令后在当前目录会存在一个<code>.git</code>文件夹，<code>git</code>所有的内容、信息都保存在此处，可以用<code>tree</code>命令查看<code>.git</code>目录下的目录结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) tree .git</span><br><span class="line">.git</span><br><span class="line">├── HEAD</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── fsmonitor-watchman.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── pre-merge-commit.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   ├── pre-receive.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── objects</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">8 directories, 16 files</span><br></pre></td></tr></table></figure>

<p>在这里首先要明确<code>git</code>工作的三个目录：</p>
<ol>
<li>工作区：日常开发用到的工作目录，比如上图的工作区是<code>git-study</code>文件夹；</li>
<li>暂存区：一般是<code>.git</code>下的<code>index</code>文件夹，所以暂存区也叫索引（<code>index</code>），在上图中因为项目为空，所以暂时看不到暂存区，当新增了文件并且执行了<code>git add</code>命令后，即可看到<code>.git/index</code>暂存区；</li>
<li>版本库：工作区下有个<code>.git</code>目录，这个不算做工作区里的内容，而是版本库，这里保存了<code>git</code>的所有信息（如分支，版本，<code>commit</code>信息等等）；</li>
</ol>
<p>在<code>.git</code>文件夹中，<code>objects</code>文件夹最为重要，里边保存了项目所有的文件及其改动信息。</p>
<h2 id="2-object类型"><a href="#2-object类型" class="headerlink" title="2. object类型"></a>2. <code>object</code>类型</h2><p>在<code>git</code>中存在几种<code>object</code>类型。</p>
<h3 id="2-1-blob-object"><a href="#2-1-blob-object" class="headerlink" title="2.1 blob object"></a>2.1 <code>blob object</code></h3><p>在工作目录中新增两个文件<code>a.txt</code>、<code>b.txt</code>，并分别写入内容<code>aaa</code>、<code>bbb</code>，此时<code>.git</code>目录不会有任何变化，因为目前文件只存在工作目录，还未添加到暂存区，此时可以执行<code>git add .</code>，再查看<code>.git</code>目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git add .</span><br><span class="line">~/workspace/github/git-study(master ✗) tree .git</span><br><span class="line">.git</span><br><span class="line">...</span><br><span class="line">├── index</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 72</span><br><span class="line">│   │   └── 943a16fb2c8f38f9dde202b7a70ccc19c52f34</span><br><span class="line">│   ├── f7</span><br><span class="line">│   │   └── 61ec192d9f0dca3329044b96ebdb12839dbff6</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">10 directories, 19 files</span><br></pre></td></tr></table></figure>

<p>可以看到在<code>.git/</code>下新增了<code>index</code>文件，也代表我们将文件添加到了暂存区中。同时在<code>.git/objects/</code>下新增了两个<code>object</code>，这两个<code>object</code>对应新建的两个文件，如果你尝试打开这两个文件，会发现是一串乱码，这是因为<code>Git</code>将信息压缩成了二进制文件。</p>
<p><code>Git</code>提供了命令来查看这种类型的文件：</p>
<ul>
<li><code>git cat-file -t xxx</code>：查看<code>object</code>的类型；</li>
<li><code>git cat-file -p xxx</code>：查看<code>object</code>的内容；</li>
</ul>
<p>在执行以上命令时需要至少传入两个<code>object</code>的前四位字符：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git cat-file -t 7294</span><br><span class="line">blob</span><br><span class="line">~/workspace/github/git-study(master ✗) git cat-file -t f761</span><br><span class="line">blob</span><br><span class="line">~/workspace/github/git-study(master ✗) git cat-file -p 7294</span><br><span class="line">aaa</span><br><span class="line">~/workspace/github/git-study(master ✗) git cat-file -p f761</span><br><span class="line">bbb</span><br></pre></td></tr></table></figure>

<p>可以看到，这两个<code>object</code>都是<code>blob</code>类型，且其中保存的内容就是之前我们在文件中输入的<code>aaa</code>和<code>bbb</code>，至此我们得到了<code>Git</code>的第一种<code>object</code>：<code>blob</code>类型的<code>object</code>。它只存储一个文件的内容，不包括文件名等其他信息。然后将这些信息经过<code>SHA-1</code>哈希算法得到对应的哈希值：<code>72943a16fb2c8f38f9dde202b7a70ccc19c52f34</code>，这个哈希值作为这个<code>object</code>在<code>git</code>仓库中的唯一身份认证。</p>
<p>此时<code>.git</code>仓库是这样的：</p>
<pre class="mermaid">graph TD
    7294
    f761</pre>



<h3 id="2-2-tree-object"><a href="#2-2-tree-object" class="headerlink" title="2.2 tree object"></a>2.2 <code>tree object</code></h3><p>使用<code>git commit</code>将代码提交到本地仓库：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git commit -m 'init'</span><br><span class="line">[master (root-commit) 1c68353] init</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 a.txt</span><br><span class="line"> create mode 100644 b.txt</span><br></pre></td></tr></table></figure>

<p>再查看<code>objects</code>目录下结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) tree .git</span><br><span class="line">.git</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── HEAD</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── fsmonitor-watchman.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── pre-merge-commit.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   ├── pre-receive.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           └── master</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 1c</span><br><span class="line">│   │   └── 68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">│   ├── 65</span><br><span class="line">│   │   └── b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">│   ├── 72</span><br><span class="line">│   │   └── 943a16fb2c8f38f9dde202b7a70ccc19c52f34</span><br><span class="line">│   ├── f7</span><br><span class="line">│   │   └── 61ec192d9f0dca3329044b96ebdb12839dbff6</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   └── master</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">15 directories, 25 files</span><br></pre></td></tr></table></figure>

<p>此时发现<code>.git/objects/</code>下又多了两个<code>object</code>，查看<code>65b7...</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git cat-file -t 65b7</span><br><span class="line">tree</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 65b7</span><br><span class="line">100644 blob 72943a16fb2c8f38f9dde202b7a70ccc19c52f34	a.txt</span><br><span class="line">100644 blob f761ec192d9f0dca3329044b96ebdb12839dbff6	b.txt</span><br></pre></td></tr></table></figure>

<p>至此我们得到了<code>Git</code>的第二种<code>object</code>：<code>tree</code>类型的<code>object</code>。它是对当前目录打一个快照，存储的是一个目录结构以及每一个文件的权限、类型、哈希值以及文件名。</p>
<p>此时的<code>Git</code>仓库是这样的：</p>
<pre class="mermaid">graph TD
     tree{65b7} -- a.txt --> 7294
     tree -- b.txt --> f761</pre>

<h3 id="2-3-commit-object"><a href="#2-3-commit-object" class="headerlink" title="2.3 commit object"></a>2.3 <code>commit object</code></h3><p>在[2.2 <code>tree object</code>](#2.2 <code>tree object</code>)中经过<code>git commit</code>操作后，一共新增了两个<code>object</code>文件，在此处我们对新增的另一个文件执行<code>git cat-file</code>命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git cat-file -t 1c68</span><br><span class="line">commit</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 1c68</span><br><span class="line">tree 65b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">author AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621489526 +0800</span><br><span class="line">committer AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621489526 +0800</span><br><span class="line"></span><br><span class="line">init</span><br></pre></td></tr></table></figure>

<p>至此我们得到了第种类型的<code>object</code>：<code>commit</code>类型的<code>object</code>。它存储的是一个提交信息，包括对应目录结构的快照哈希值，上一个提交的哈希值（这里由于是第一个提交，所以没有父节点）、提交的作者以及提交的时间，最后是该提交的信息。</p>
<p>此时的<code>Git</code>仓库是这样的：</p>
<pre class="mermaid">graph TD
    commit((1c68)) --> tree{65b7}
    tree -- a.txt --> 7294
     tree -- b.txt --> f761</pre>

<h3 id="2-4-Head-分支"><a href="#2-4-Head-分支" class="headerlink" title="2.4 Head 分支"></a>2.4 <code>Head</code> 分支</h3><p>在<code>Git</code>中，<code>Head</code>、分支、普通的<code>tag</code>都可以简单理解为一个指针，指向对象<code>commit</code>的<code>SHA-1</code>值：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) cat .git/HEAD</span><br><span class="line">ref: refs/heads/master</span><br><span class="line">~/workspace/github/git-study(master ✔) cat .git/refs/heads/master</span><br><span class="line">1c68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br></pre></td></tr></table></figure>

<p>其结构为：</p>
<pre class="mermaid">graph TD
    HEAD --> master
    master --> commit((1c68))
    subgraph init
    commit --> tree{65b7}
    tree -- a.txt --> 7294
     tree -- b.txt --> f761
     end</pre>

<h2 id="3-新增文件"><a href="#3-新增文件" class="headerlink" title="3. 新增文件"></a>3. 新增文件</h2><h3 id="3-1-git-add过程"><a href="#3-1-git-add过程" class="headerlink" title="3.1 git add过程"></a>3.1 <code>git add</code>过程</h3><p>在工作目录中新增一个文件<code>c.txt</code>，并写入<code>ccc</code>。执行<code>git add</code>将改动添加到暂存区域：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git add .</span><br><span class="line">~/workspace/github/git-study(master ✗) tree .git</span><br><span class="line">.git</span><br><span class="line">...</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 1c</span><br><span class="line">│   │   └── 68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">│   ├── 65</span><br><span class="line">│   │   └── b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">│   ├── 72</span><br><span class="line">│   │   └── 943a16fb2c8f38f9dde202b7a70ccc19c52f34</span><br><span class="line">│   ├── b2</span><br><span class="line">│   │   └── a7546679fdf79ca0eb7bfbee1e1bb342487380</span><br><span class="line">│   ├── f7</span><br><span class="line">│   │   └── 61ec192d9f0dca3329044b96ebdb12839dbff6</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">16 directories, 26 files</span><br></pre></td></tr></table></figure>

<p>可以看到，当执行完<code>git add .</code>后，<code>objects</code>中新增了<code>c.txt</code>对应的<code>blob object</code>：<code>b2a7546679fdf79ca0eb7bfbee1e1bb342487380</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git cat-file -t b2a7</span><br><span class="line">blob</span><br><span class="line">~/workspace/github/git-study(master ✗) git cat-file -p b2a7</span><br><span class="line">ccc</span><br></pre></td></tr></table></figure>

<h3 id="3-2-git-commit过程"><a href="#3-2-git-commit过程" class="headerlink" title="3.2 git commit过程"></a>3.2 <code>git commit</code>过程</h3><p>执行<code>git commit -m &#39;add c.txt’</code>后：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git commit -m 'add c.txt'</span><br><span class="line">[master 64bf692] add c.txt</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 c.txt</span><br><span class="line">~/workspace/github/git-study(master ✔) tree .git</span><br><span class="line">.git</span><br><span class="line">...</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 15</span><br><span class="line">│   │   └── b6c2b4cbb04ddb97da706346ed34086664309d</span><br><span class="line">│   ├── 1c</span><br><span class="line">│   │   └── 68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">│   ├── 64</span><br><span class="line">│   │   └── bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</span><br><span class="line">│   ├── 65</span><br><span class="line">│   │   └── b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">│   ├── 72</span><br><span class="line">│   │   └── 943a16fb2c8f38f9dde202b7a70ccc19c52f34</span><br><span class="line">│   ├── b2</span><br><span class="line">│   │   └── a7546679fdf79ca0eb7bfbee1e1bb342487380</span><br><span class="line">│   ├── f7</span><br><span class="line">│   │   └── 61ec192d9f0dca3329044b96ebdb12839dbff6</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">18 directories, 28 files</span><br></pre></td></tr></table></figure>

<p>可以看到，执行完<code>git commit</code>命令后，<code>.git/objects/</code>中新增了<code>15b6c2b4cbb04ddb97da706346ed34086664309d</code>、<code>64bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</code>两个<code>object</code>，对他们分别执行<code>git cat-file</code>查看文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git cat-file -t 15b6</span><br><span class="line">tree</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 15b6</span><br><span class="line">100644 blob 72943a16fb2c8f38f9dde202b7a70ccc19c52f34	a.txt</span><br><span class="line">100644 blob f761ec192d9f0dca3329044b96ebdb12839dbff6	b.txt</span><br><span class="line">100644 blob b2a7546679fdf79ca0eb7bfbee1e1bb342487380	c.txt</span><br><span class="line"></span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -t 64bf</span><br><span class="line">commit</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 64bf</span><br><span class="line">tree 15b6c2b4cbb04ddb97da706346ed34086664309d</span><br><span class="line">parent 1c68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">author AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621494415 +0800</span><br><span class="line">committer AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621494415 +0800</span><br><span class="line"></span><br><span class="line">add c.txt</span><br></pre></td></tr></table></figure>

<p>可以看到，新增的连个<code>object</code>一个是<code>tree</code>类型，保存当前工作目录的文件信息，一个是<code>commit</code>类型，保存<code>git commit</code>提交的相关信息。</p>
<p>值得一提的是，<code>commit object</code>中的<code>tree</code>属性指向当前最新的<code>tree object</code>，其<code>parent</code>指向上一个<code>commit</code>的<code>object</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 15b6c2b4cbb04ddb97da706346ed34086664309d</span><br><span class="line">100644 blob 72943a16fb2c8f38f9dde202b7a70ccc19c52f34	a.txt</span><br><span class="line">100644 blob f761ec192d9f0dca3329044b96ebdb12839dbff6	b.txt</span><br><span class="line">100644 blob b2a7546679fdf79ca0eb7bfbee1e1bb342487380	c.txt</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 1c68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">tree 65b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">author AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621489526 +0800</span><br><span class="line">committer AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621489526 +0800</span><br><span class="line"></span><br><span class="line">init</span><br></pre></td></tr></table></figure>

<p>此时<code>.git</code>仓库结构如下：</p>
<pre class="mermaid">graph TD
    subgraph init
    commit1((1c68)) --> tree1{65b7}
    tree1 -- a.txt --> 7294
     tree1 -- b.txt --> f761
     end
     subgraph add c.txt
     commit2((64bf)) --> tree2{15b6}
     tree2 -- a.txt --> 7294
     tree2 -- b.txt --> f761
     tree2 -- c.txt --> b2a7
     end
     master --> commit2((64bf))</pre>



<h2 id="4-修改文件"><a href="#4-修改文件" class="headerlink" title="4. 修改文件"></a>4. 修改文件</h2><h3 id="4-1-git-add过程"><a href="#4-1-git-add过程" class="headerlink" title="4.1 git add过程"></a>4.1 <code>git add</code>过程</h3><p>修改<code>a.txt</code>文件为<code>aaandy</code>，执行<code>git add .</code>命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git add .</span><br><span class="line">~/workspace/github/git-study(master ✗) tree .git</span><br><span class="line">.git</span><br><span class="line">...</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 15</span><br><span class="line">│   │   └── b6c2b4cbb04ddb97da706346ed34086664309d</span><br><span class="line">│   ├── 1c</span><br><span class="line">│   │   └── 68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">│   ├── 64</span><br><span class="line">│   │   └── bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</span><br><span class="line">│   ├── 65</span><br><span class="line">│   │   └── b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">│   ├── 68</span><br><span class="line">│   │   └── 57d1446f8b6c55b61954c5930309083fe816fe</span><br><span class="line">│   ├── 72</span><br><span class="line">│   │   └── 943a16fb2c8f38f9dde202b7a70ccc19c52f34</span><br><span class="line">│   ├── b2</span><br><span class="line">│   │   └── a7546679fdf79ca0eb7bfbee1e1bb342487380</span><br><span class="line">│   ├── f7</span><br><span class="line">│   │   └── 61ec192d9f0dca3329044b96ebdb12839dbff6</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">19 directories, 29 files</span><br></pre></td></tr></table></figure>

<p><code>.git/objects/</code>下新增了<code>6857d1446f8b6c55b61954c5930309083fe816fe</code>文件，查看器内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git cat-file -t 6857</span><br><span class="line">blob</span><br><span class="line">~/workspace/github/git-study(master ✗) git cat-file -p 6857</span><br><span class="line">aaandy</span><br></pre></td></tr></table></figure>

<h3 id="4-2-git-commit过程"><a href="#4-2-git-commit过程" class="headerlink" title="4.2 git commit过程"></a>4.2 <code>git commit</code>过程</h3><p>执行<code>git commit -m &#39;update a.txt&#39;</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✗) git commit -m 'update a.txt'</span><br><span class="line">[master f9651a1] update a.txt</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line">~/workspace/github/git-study(master ✔) tree .git</span><br><span class="line">.git</span><br><span class="line">...</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 15</span><br><span class="line">│   │   └── b6c2b4cbb04ddb97da706346ed34086664309d</span><br><span class="line">│   ├── 1c</span><br><span class="line">│   │   └── 68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">│   ├── 64</span><br><span class="line">│   │   └── bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</span><br><span class="line">│   ├── 65</span><br><span class="line">│   │   └── b70c81bbedd324eb1d79c90a72ea2bddae82b4</span><br><span class="line">│   ├── 68</span><br><span class="line">│   │   └── 57d1446f8b6c55b61954c5930309083fe816fe</span><br><span class="line">│   ├── 72</span><br><span class="line">│   │   └── 943a16fb2c8f38f9dde202b7a70ccc19c52f34</span><br><span class="line">│   ├── 96</span><br><span class="line">│   │   └── a8112ff305a9d8c94985eba8c25bb4c296d43e</span><br><span class="line">│   ├── b2</span><br><span class="line">│   │   └── a7546679fdf79ca0eb7bfbee1e1bb342487380</span><br><span class="line">│   ├── f7</span><br><span class="line">│   │   └── 61ec192d9f0dca3329044b96ebdb12839dbff6</span><br><span class="line">│   ├── f9</span><br><span class="line">│   │   └── 651a1b2b64ea26b960983845a3b7443e81cdcd</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">21 directories, 31 files</span><br></pre></td></tr></table></figure>

<p>相对于之前的目录，新增了<code>96a8112ff305a9d8c94985eba8c25bb4c296d43e</code>和<code>f9651a1b2b64ea26b960983845a3b7443e81cdcd</code>两个文件，对其执行<code>git cat-file</code>可以得到：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git cat-file -t f965</span><br><span class="line">commit</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p f965</span><br><span class="line">tree 96a8112ff305a9d8c94985eba8c25bb4c296d43e</span><br><span class="line">parent 64bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</span><br><span class="line">author AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621498146 +0800</span><br><span class="line">committer AndyWang &lt;wangyuanwenqi@outlook.com&gt; 1621498146 +0800</span><br><span class="line"></span><br><span class="line">update a.txt</span><br><span class="line"></span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -t 96a8</span><br><span class="line">tree</span><br><span class="line">~/workspace/github/git-study(master ✔) git cat-file -p 96a8</span><br><span class="line">100644 blob 6857d1446f8b6c55b61954c5930309083fe816fe	a.txt</span><br><span class="line">100644 blob f761ec192d9f0dca3329044b96ebdb12839dbff6	b.txt</span><br><span class="line">100644 blob b2a7546679fdf79ca0eb7bfbee1e1bb342487380	c.txt</span><br></pre></td></tr></table></figure>

<p>这里同样得到一个<code>commit</code>类型的<code>object</code>和一个<code>tree</code>类型的<code>object</code>。此时<code>Git</code>库的结构为：</p>
<pre class="mermaid">graph TD
    subgraph init
    commit1((1c68)) --> tree1{65b7}
    tree1 -- a.txt --> 7294
     tree1 -- b.txt --> f761
     end
     subgraph add c.txt
     commit2((64bf)) --> tree2{15b6}
     tree2 -- a.txt --> 7294
     tree2 -- b.txt --> f761
     tree2 -- c.txt --> b2a7
     end
     subgraph update a.txt
     commit3((f965)) --> tree3{96a8}
     tree3 -- a.txt --> 6857
     tree3 -- b.txt --> f761
     tree3 -- c.txt --> b2a7
    end
     master --> commit3</pre>

<p>可以看到，如果修改一个文件的话，只会针对新修改的文件生成一个新的快照，未修改的文件还是引用之前的快照。新增文件也是同样的道理。</p>
<h2 id="5-git-log"><a href="#5-git-log" class="headerlink" title="5. git log"></a>5. <code>git log</code></h2><p>使用<code>git log</code>查看<code>commit</code>历史记录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git log</span><br><span class="line">commit f9651a1b2b64ea26b960983845a3b7443e81cdcd (HEAD -&gt; master)</span><br><span class="line">Author: AndyWang &lt;wangyuanwenqi@outlook.com&gt;</span><br><span class="line">Date:   Thu May 20 16:09:06 2021 +0800</span><br><span class="line"></span><br><span class="line">    update a.txt</span><br><span class="line"></span><br><span class="line">commit 64bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</span><br><span class="line">Author: AndyWang &lt;wangyuanwenqi@outlook.com&gt;</span><br><span class="line">Date:   Thu May 20 15:06:55 2021 +0800</span><br><span class="line"></span><br><span class="line">    add c.txt</span><br><span class="line"></span><br><span class="line">commit 1c68353f1c7f17b91032e02f605d3b6e1cdb4f2f</span><br><span class="line">Author: AndyWang &lt;wangyuanwenqi@outlook.com&gt;</span><br><span class="line">Date:   Thu May 20 13:45:26 2021 +0800</span><br><span class="line"></span><br><span class="line">    init</span><br></pre></td></tr></table></figure>

<p>可以看到使用<code>git log</code>查出来的<code>log</code>日志，其实就是按顺序展示<code>commit object</code>。从<code>commit object</code>可以找到对应的<code>tree object</code>，从<code>tree object</code>又可以找到各个文件对应的<code>blob object</code>。</p>
<p><code>git log</code>的运行过程如下：</p>
<ol>
<li>查找<code>HEAD</code>指针对应的分支，本例是<code>master</code></li>
<li>找到<code>master</code>指针指向的快照，本例是<code>f9651a1b2b64ea26b960983845a3b7443e81cdcd</code></li>
<li>找到父节点（前一个快照）<code>64bf692c4b951d90a9eaa2f29d9a8776fe9f6d05</code></li>
<li>以此类推，显示当前分支的所有快照。</li>
</ol>
<h2 id="6-branch"><a href="#6-branch" class="headerlink" title="6. branch"></a>6. <code>branch</code></h2><p>所谓分支(<code>branch</code>)就是指向某个快照的指针，分支名就是指针名。此处可以新建一个·<code>dev</code>分支：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">~/workspace/github/git-study(master ✔) git checkout -b dev</span><br><span class="line">Switched to a new branch 'dev'</span><br><span class="line">~/workspace/github/git-study(master ✔) git checkout -b dev</span><br><span class="line">Switched to a new branch 'dev'</span><br><span class="line">~/workspace/github/git-study(dev ✔) tree .git</span><br><span class="line">.git</span><br><span class="line">。。。</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   ├── dev</span><br><span class="line">    │   └── master</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">21 directories, 33 files</span><br><span class="line">~/workspace/github/git-study(dev ✔) cat .git/refs/heads/dev</span><br><span class="line">f9651a1b2b64ea26b960983845a3b7443e81cdcd</span><br><span class="line">~/workspace/github/git-study(dev ✔) cat .git/refs/heads/master</span><br><span class="line">f9651a1b2b64ea26b960983845a3b7443e81cdcd</span><br></pre></td></tr></table></figure>

<p>可以看到，新建的<code>dev</code>分支与<code>master</code>的指向是相同的，都是指向最新的<code>f965</code>对象。所以<code>git</code>新建指针特别容易，成本极低。</p>
<p>Git 有一个特殊指针<code>HEAD</code>， 总是指向当前分支的最近一次快照。另外，Git 还提供简写方式，<code>HEAD^</code>指向 <code>HEAD</code>的前一个快照（父节点），<code>HEAD~6</code>则是<code>HEAD</code>之前的第6个快照。</p>
<p>每一个分支指针都是一个文本文件，保存在<code>.git/refs/heads/</code>目录，该文件的内容就是它所指向的快照的二进制对象名（哈希值）。</p>
<a id="more"></a>


  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/category">Category</a></li>
         
          <li><a href="/blog/tag">Tag</a></li>
         
          <li><a href="/blog/about">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-git仓库"><span class="toc-number">1.</span> <span class="toc-text">1. git仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-object类型"><span class="toc-number">2.</span> <span class="toc-text">2. object类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-blob-object"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 blob object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-tree-object"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 tree object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-commit-object"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 commit object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Head-分支"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 Head 分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-新增文件"><span class="toc-number">3.</span> <span class="toc-text">3. 新增文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-git-add过程"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 git add过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-git-commit过程"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 git commit过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-修改文件"><span class="toc-number">4.</span> <span class="toc-text">4. 修改文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-git-add过程"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 git add过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-git-commit过程"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 git commit过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-git-log"><span class="toc-number">5.</span> <span class="toc-text">5. git log</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-branch"><span class="toc-number">6.</span> <span class="toc-text">6. branch</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/" target="_blank" rel="noopener"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&text=git基础原理" target="_blank" rel="noopener"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&is_video=false&description=git基础原理" target="_blank" rel="noopener"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=git基础原理&body=Check out this article: https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&title=git基础原理" target="_blank" rel="noopener"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://aaaaaandy.github.io/2021/05/19/git/git%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&name=git基础原理&description=1. git仓库

git init可以初始化一个本地git仓库，执行完命令后在当前目录会存在一个.git文件夹，git所有的内容、信息都保存在此处，可以用tree命令查看.git目录下的目录结构：

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28


~/workspace/github/git-study(master ✗) tree .git
.git
├── HEAD
├── config
├── description
├── hooks
│   ├── applypatch-msg"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 aaaaaAndy
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/category">Category</a></li>
         
          <li><a href="/blog/tag">Tag</a></li>
         
          <li><a href="/blog/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/blog/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/blog/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->

<script src="/blog/lib/jquery/jquery.min.js"></script>


<script src="/blog/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/blog/js/main.js"></script>






<script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
<script>
  if (window.mermaid) {
    mermaid.initialize({theme: 'base'});
  }
</script>

